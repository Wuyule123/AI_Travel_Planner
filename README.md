# ğŸŒ AI Travel Planner | AI æ™ºèƒ½æ—…è¡Œè§„åˆ’åŠ©æ‰‹

åŸºäº Next.js å’Œé˜¿é‡Œäº‘é€šä¹‰åƒé—®çš„æ™ºèƒ½æ—…è¡Œè¡Œç¨‹è§„åˆ’åº”ç”¨ï¼Œé€šè¿‡ AI å¸®ä½ å¿«é€Ÿç”Ÿæˆä¸ªæ€§åŒ–æ—…è¡Œè®¡åˆ’ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½è¡Œç¨‹ç”Ÿæˆ**ï¼šè¾“å…¥æ—…è¡Œéœ€æ±‚ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„å¤šæ—¥è¡Œç¨‹è®¡åˆ’
- **åœ°å›¾é€‰ç‚¹**ï¼šé›†æˆé«˜å¾·åœ°å›¾ï¼Œå¯è§†åŒ–é€‰æ‹©èµ·ç‚¹å’Œç»ˆç‚¹
- **è¯­éŸ³è¾“å…¥**ï¼šæ”¯æŒè¯­éŸ³æè¿°æ—…è¡Œéœ€æ±‚ï¼ˆéœ€æµè§ˆå™¨æ”¯æŒï¼‰
- **é¢„ç®—è§„åˆ’**ï¼šè‡ªåŠ¨ä¼°ç®—å„é¡¹è´¹ç”¨ï¼Œç”Ÿæˆé¢„ç®—æ˜ç»†
- **è·¯çº¿åœ°å›¾**ï¼šæ¯æ—¥è¡Œç¨‹è‡ªåŠ¨åœ¨åœ°å›¾ä¸Šå±•ç¤ºæ™¯ç‚¹ä½ç½®å’Œè·¯çº¿

### ğŸ“± ç”¨æˆ·ä½“éªŒ
- **è¡Œç¨‹ä¿å­˜**ï¼šç™»å½•åå¯ä¿å­˜è¡Œç¨‹åˆ°ä¸ªäººä»ªè¡¨ç›˜
- **è¡Œç¨‹ç®¡ç†**ï¼šæŸ¥çœ‹ã€ç¼–è¾‘å’Œåˆ é™¤å·²ä¿å­˜çš„è¡Œç¨‹
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®
- **å®æ—¶é¢„è§ˆ**ï¼šå³æ—¶æŸ¥çœ‹ AI ç”Ÿæˆçš„è¡Œç¨‹è¯¦æƒ…

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- pnpmï¼ˆæ¨èï¼‰æˆ– npm
- Supabase è´¦å·
- é˜¿é‡Œäº‘è´¦å·ï¼ˆé€šä¹‰åƒé—® APIï¼‰
- é«˜å¾·åœ°å›¾ Web ç«¯ Key

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/yourusername/ai-travel-planner.git
cd ai-travel-planner
```

2. **å®‰è£…ä¾èµ–**
```bash
pnpm install
# æˆ–
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# é˜¿é‡Œäº‘é€šä¹‰åƒé—® API
DASHSCOPE_API_KEY=your_dashscope_api_key

# é«˜å¾·åœ°å›¾é…ç½®
NEXT_PUBLIC_AMAP_KEY=your_amap_web_key
NEXT_PUBLIC_AMAP_SECRET=your_amap_security_code
```

4. **è®¾ç½®æ•°æ®åº“**

åœ¨ Supabase ä¸­åˆ›å»º `trips` è¡¨ï¼š

```sql
create table trips (
  id uuid default gen_random_uuid() primary key,
  user_id uuid references auth.users not null,
  title text not null,
  destination text not null,
  start_date text not null,
  end_date text not null,
  trip_json jsonb not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- å¯ç”¨è¡Œçº§å®‰å…¨ç­–ç•¥
alter table trips enable row level security;

-- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„è¡Œç¨‹
create policy "Users can only access their own trips"
  on trips for all
  using (auth.uid() = user_id);
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
pnpm dev
# æˆ–
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000)

## ğŸ“¦ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Next.js 14+** - React å…¨æ ˆæ¡†æ¶ï¼ˆApp Routerï¼‰
- **TypeScript** - ç±»å‹å®‰å…¨
- **Tailwind CSS** - æ ·å¼è®¾è®¡
- **Shadcn/ui** - UI ç»„ä»¶åº“

### åç«¯æœåŠ¡
- **Supabase** - æ•°æ®åº“ + ç”¨æˆ·è®¤è¯
- **é˜¿é‡Œäº‘é€šä¹‰åƒé—®** - AI å¤§è¯­è¨€æ¨¡å‹
- **é«˜å¾·åœ°å›¾ API** - åœ°å›¾å’Œåœ°ç†ç¼–ç æœåŠ¡

### æ ¸å¿ƒä¾èµ–
```json
{
  "next": "^15.0.0",
  "react": "^19.0.0",
  "typescript": "^5.0.0",
  "@supabase/supabase-js": "^2.0.0",
  "tailwindcss": "^3.4.0"
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-travel-planner/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ api/                  # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ plan/            # è¡Œç¨‹ç”Ÿæˆ API
â”‚   â”‚   â””â”€â”€ trips/           # è¡Œç¨‹ CRUD API
â”‚   â”œâ”€â”€ dashboard/           # ç”¨æˆ·ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ planner/             # è¡Œç¨‹è§„åˆ’é¡µé¢
â”‚   â”œâ”€â”€ trip/[id]/          # è¡Œç¨‹è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ login/              # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx            # é¦–é¡µ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AmapLoader.tsx  # é«˜å¾·åœ°å›¾åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ MapSelector.tsx # åœ°å›¾é€‰ç‚¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MapView.tsx     # åœ°å›¾å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SpeechButton.tsx # è¯­éŸ³è¾“å…¥æŒ‰é’®
â”‚   â”‚   â””â”€â”€ ui/             # UI åŸºç¡€ç»„ä»¶
â”‚   â””â”€â”€ lib/                # å·¥å…·åº“
â”‚       â”œâ”€â”€ dashscope.ts    # é€šä¹‰åƒé—® API
â”‚       â”œâ”€â”€ supabase.ts     # Supabase å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ schema.ts       # TypeScript ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ utils.ts        # å·¥å…·å‡½æ•°
â”œâ”€â”€ .env.local              # ç¯å¢ƒå˜é‡ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”œâ”€â”€ next.config.ts          # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts      # Tailwind é…ç½®
â””â”€â”€ tsconfig.json          # TypeScript é…ç½®
```

## ğŸ”‘ API å¯†é’¥é…ç½®æŒ‡å—

### 1. Supabase è®¾ç½®
1. è®¿é—® [supabase.com](https://supabase.com)
2. åˆ›å»ºæ–°é¡¹ç›®
3. åœ¨ Project Settings â†’ API ä¸­è·å–ï¼š
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### 2. é˜¿é‡Œäº‘é€šä¹‰åƒé—®
1. è®¿é—® [é˜¿é‡Œäº‘æ§åˆ¶å°](https://dashscope.console.aliyun.com/)
2. å¼€é€šé€šä¹‰åƒé—®æœåŠ¡
3. åˆ›å»º API Keyï¼š`DASHSCOPE_API_KEY`

### 3. é«˜å¾·åœ°å›¾
1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/)
2. åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹© **Web ç«¯ï¼ˆJS APIï¼‰**
3. é…ç½®åŸŸåç™½åå•ï¼š
   - å¼€å‘ç¯å¢ƒï¼š`localhost`ã€`127.0.0.1`
   - ç”Ÿäº§ç¯å¢ƒï¼šä½ çš„å®é™…åŸŸå
4. è·å– Keyï¼š`NEXT_PUBLIC_AMAP_KEY`
5. å¯ç”¨å®‰å…¨å¯†é’¥å¹¶è·å–ï¼š`NEXT_PUBLIC_AMAP_SECRET`

## ğŸ¨ åŠŸèƒ½å±•ç¤º

### 1. æ™ºèƒ½è§„åˆ’
- è¾“å…¥æ—…è¡Œéœ€æ±‚ï¼ˆç›®çš„åœ°ã€å¤©æ•°ã€é¢„ç®—ã€åå¥½ï¼‰
- AI è‡ªåŠ¨ç”ŸæˆåŒ…å«æ™¯ç‚¹ã€é¤é¥®ã€ä½å®¿ã€äº¤é€šçš„å®Œæ•´è¡Œç¨‹
- è‡ªåŠ¨ä¼°ç®—å„é¡¹è´¹ç”¨

### 2. åœ°å›¾äº¤äº’
- å¯è§†åŒ–é€‰æ‹©èµ·ç‚¹å’Œç»ˆç‚¹åŸå¸‚
- è‡ªåŠ¨è¯†åˆ«çœå¸‚åç§°
- æ”¯æŒæ‰‹åŠ¨è¾“å…¥æˆ–åœ°å›¾é€‰ç‚¹ä¸¤ç§æ¨¡å¼

### 3. è¡Œç¨‹ç®¡ç†
- ä¿å­˜å–œæ¬¢çš„è¡Œç¨‹åˆ°ä¸ªäººè´¦æˆ·
- åœ¨ä»ªè¡¨ç›˜æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜è¡Œç¨‹
- æ”¯æŒç¼–è¾‘å’Œåˆ é™¤è¡Œç¨‹

### 4. åœ°å›¾å±•ç¤º
- æ¯æ—¥è¡Œç¨‹åœ¨åœ°å›¾ä¸Šæ ‡æ³¨æ™¯ç‚¹ä½ç½®
- è‡ªåŠ¨ç»˜åˆ¶æ¸¸è§ˆè·¯çº¿
- ç‚¹å‡»æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **è®¿é—®è§„åˆ’é¡µé¢**
   ```
   http://localhost:3000
   ```

2. **è¾“å…¥æ—…è¡Œéœ€æ±‚**
   - æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨æ–‡æœ¬æ¡†è¾“å…¥
     ```
     æˆ‘æƒ³ä»å—äº¬åˆ°æ³°å·æ—…è¡Œ2å¤©ï¼Œé¢„ç®—500å…ƒï¼Œå–œæ¬¢ç¾é£Ÿå’Œæ–‡åŒ–æ™¯ç‚¹
     ```
   - æ–¹å¼äºŒï¼šç‚¹å‡»"ä»åœ°å›¾é€‰æ‹©èµ·ç‚¹å’Œç»ˆç‚¹"ï¼Œåœ¨åœ°å›¾ä¸Šé€‰æ‹©
   - æ–¹å¼ä¸‰ï¼šä½¿ç”¨è¯­éŸ³è¾“å…¥æŒ‰é’®

3. **ç”Ÿæˆè¡Œç¨‹**
   - ç‚¹å‡»"ç”Ÿæˆè¡Œç¨‹"æŒ‰é’®
   - ç­‰å¾… AI ç”Ÿæˆï¼ˆé€šå¸¸ 5-15 ç§’ï¼‰

4. **æŸ¥çœ‹å’Œä¿å­˜**
   - æŸ¥çœ‹æ¯æ—¥è¯¦ç»†è¡Œç¨‹å’Œåœ°å›¾
   - ç‚¹å‡»"ä¿å­˜è¡Œç¨‹"ï¼ˆéœ€å…ˆç™»å½•ï¼‰


## ğŸ› å¸¸è§é—®é¢˜

### Q: åœ°å›¾æ— æ³•åŠ è½½
**A:** æ£€æŸ¥é«˜å¾·åœ°å›¾é…ç½®ï¼š
1. ç¡®è®¤ `.env.local` ä¸­çš„ `NEXT_PUBLIC_AMAP_KEY` å’Œ `NEXT_PUBLIC_AMAP_SECRET` æ­£ç¡®
2. åœ¨é«˜å¾·æ§åˆ¶å°ç¡®è®¤åŸŸåç™½åå•é…ç½®
3. é‡å¯å¼€å‘æœåŠ¡å™¨

### Q: AI ç”Ÿæˆå¤±è´¥
**A:** æ£€æŸ¥é˜¿é‡Œäº‘é…ç½®ï¼š
1. ç¡®è®¤ `DASHSCOPE_API_KEY` æ­£ç¡®
2. æ£€æŸ¥é€šä¹‰åƒé—®æœåŠ¡æ˜¯å¦å¼€é€š
3. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ä½™é¢

### Q: æ— æ³•ä¿å­˜è¡Œç¨‹
**A:** æ£€æŸ¥ Supabase é…ç½®ï¼š
1. ç¡®è®¤å·²ç™»å½•
2. æ£€æŸ¥ Supabase è¡¨å’Œ RLS ç­–ç•¥
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q: é€†åœ°ç†ç¼–ç å¤±è´¥ï¼ˆINVALID_USER_SCODEï¼‰
**A:** è¿™æ˜¯é«˜å¾·åœ°å›¾å®‰å…¨éªŒè¯å¤±è´¥ï¼š
1. åœ¨é«˜å¾·æ§åˆ¶å°å¯ç”¨"å®‰å…¨å¯†é’¥"
2. å°†å®‰å…¨å¯†é’¥æ·»åŠ åˆ° `.env.local` çš„ `NEXT_PUBLIC_AMAP_SECRET`
3. ç¡®ä¿åŸŸååœ¨ç™½åå•ä¸­
4. é‡å¯å¼€å‘æœåŠ¡å™¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ License

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¨â€ğŸ’» ä½œè€…

Wuyule123

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Supabase](https://supabase.com/) - åç«¯æœåŠ¡
- [é˜¿é‡Œäº‘é€šä¹‰åƒé—®](https://tongyi.aliyun.com/) - AI å¤§æ¨¡å‹
- [é«˜å¾·åœ°å›¾](https://lbs.amap.com/) - åœ°å›¾æœåŠ¡
- [Shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶

## ğŸ“® è”ç³»æ–¹å¼

- Email: 1078314987@qq.com
- GitHub: [@Wuyule123](https://github.com/Wuyule123)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼